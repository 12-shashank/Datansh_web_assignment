<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" 
    rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="ass.css">
    <style>
        .container{
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: white;
        }
    </style>
    <title>Reset Password</title>
</head>
<body>
    <div class="container">
    <h1>Reset Password</h1>
    <p id="xx"> Please provide required Information</p>
    <input type="password" id="oldPassword" placeholder="Old Password">
    <input type="password" id="newPassword" placeholder="New Password">
    <input type="password" id="confirmPassword" placeholder="Confirm Password">
    <button onclick="resetPassword()">Reset Password</button>
    </div>

    <script>
        let urlParams = new URLSearchParams(window.location.search);
        let username = urlParams.get('username');
        let us = document.getElementById("xx");
        us.innerHTML=username;

        function resetPassword() {
            let oldPassword =document.getElementById('oldPassword').value;
            let newPassword = document.getElementById('newPassword').value;
            let confirmPassword = document.getElementById('confirmPassword').value;
            let users = JSON.parse(localStorage.getItem('users')) || [];
            let pass = users.some(user => user.password ===oldPassword); 

            if (pass && newPassword === confirmPassword) {
                // Update the password in localStorage or your backend
                // For demonstration purposes, updating password in localStorage
                const userIndex = users.findIndex(user => user.username === username) ;

                if (userIndex !== -1) {
                    users[userIndex].password = newPassword;
                    localStorage.setItem('users', JSON.stringify(users));
                    alert('Password reset successful');
                } else {
                    alert('User not found');
                }
            } else {
                alert('Passwords do not match');
            }
        }
    </script>
</body>
</html>
